print("([[This file was protected with MoonSec V3]]):gsub('.+', (function(a) _UiIKV_Q_owqC = a; end)); return(function(a,...)local d;local r;local h;local o;local f;local l;local e=24915;local n=0;local t={};while n<262 do n=n+1;while n<0x28c and e%0x3600<0x1b00 do n=n+1 e=(e*655)%21720 local c=n+e if(e%0x1b78)>0xdbc then e=(e*0x332)%0x2af1 while n<0x327 and e%0x268e<0x1347 do n=n+1 e=(e*544)%17770 local d=n+e if(e%0x4b68)<=0x25b4 then e=(e-0xbb)%0xa8ee local e=46756 if not t[e]then t[e]=0x1 r=string;end elseif e%2~=0 then e=(e*0x38e)%0x215d local e=55375 if not t[e]then t[e]=0x1 end else e=(e-0x322)%0x51b0 n=n+1 local e=46092 if not t[e]then t[e]=0x1 o={};end end end elseif e%2~=0 then e=(e-0x23a)%0xbdcb while n<0xc7 and e%0x8de<0x46f do n=n+1 e=(e+809)%9416 local l=n+e if(e%0x25c6)>0x12e3 then e=(e-0x2aa)%0x8fa4 local e=14991 if not t[e]then t[e]=0x1 d=getfenv and getfenv();end elseif e%2~=0 then e=(e-0x101)%0x8a93 local e=20389 if not t[e]then t[e]=0x1 end else e=(e-0x2ff)%0x8d36 n=n+1 local e=99457 if not t[e]then t[e]=0x1 f="\4\8\116\111\110\117\109\98\101\114\109\122\115\106\118\84\108\83\0\6\115\116\114\105\110\103\4\99\104\97\114\86\72\82\69\89\99\82\74\0\6\115\116\114\105\110\103\3\115\117\98\81\113\90\68\100\106\88\82\0\6\115\116\114\105\110\103\4\98\121\116\101\77\109\76\76\104\120\122\73\0\5\116\97\98\108\101\6\99\111\110\99\97\116\87\104\111\70\88\122\75\111\0\5\116\97\98\108\101\6\105\110\115\101\114\116\99\110\118\81\88\105\70\108\5";end end end else e=(e-0x91)%0x46de n=n+1 while n<0x2e0 and e%0x2fbc<0x17de do n=n+1 e=(e-463)%21734 local f=n+e if(e%0x2efa)<0x177d then e=(e*0x7a)%0x4ccf local e=76410 if not t[e]then t[e]=0x1 d=(not d)and _ENV or d;end elseif e%2~=0 then e=(e-0xe8)%0x2194 local e=76947 if not t[e]then t[e]=0x1 h=tonumber;end else e=(e+0x2d1)%0x98d3 n=n+1 local e=17436 if not t[e]then t[e]=0x1 l=function(l)local e=0x01 local function t(n)e=e+n return l:sub(e-n,e-0x01)end while true do local n=t(0x01)if(n=="\5")then break end local e=r.byte(t(0x01))local e=t(e)if n=="\2"then e=o.mzsjvTlS(e)elseif n=="\3"then e=e~="\0"elseif n=="\6"then d[e]=function(n,e)return a(8,nil,a,e,n)end elseif n=="\4"then e=d[e]elseif n=="\0"then e=d[e][t(r.byte(t(0x01)))];end local n=t(0x08)o[n]=e end end end end end end end e=(e*341)%16017 end l(f);local n={};for e=0x0,0xff do local t=o.VHREYcRJ(e);n[e]=t;n[t]=e;end local function c(e)return n[e];end local r=(function(a,l)local f,t=0x01,0x10 local n={{},{},{}}local d=-0x01 local e=0x01 local r=a while true do n[0x03][o.QqZDdjXR(l,e,(function()e=f+e return e-0x01 end)())]=(function()d=d+0x01 return d end)()if d==(0x0f)then d=""t=0x000 break end end local d=#l while e<d+0x01 do n[0x02][t]=o.QqZDdjXR(l,e,(function()e=f+e return e-0x01 end)())t=t+0x01 if t%0x02==0x00 then t=0x00 o.cnvQXiFl(n[0x01],(c((((n[0x03][n[0x02][0x00]]or 0x00)*0x10)+(n[0x03][n[0x02][0x01]]or 0x00)+r)%0x100)));r=a+r;end end return o.WhoFXzKo(n[0x01])end);l(r(12,".;rat<JF^7PKAHI227"));l(r(72,"H)dtR%LiuQ?vJ=h;vuiLQv%R9?vQiLdiiJQR%=Z=Ju%t#Q=uQhLt^=v2ii=Ru=vs%v))=RuJd;-?QvRtd=v%Q?dLQQ%%iutdh)Qh%JhtQQ%uRd;%Qht;h?LE)hRt;JvdL))hJ;d%R%;)vJLtd<vRLJdvhRv%%;Gt=;tshJo=vQuRt/u%?R%Rs==uuud?hn?R%i;L?=LiRdQR%Rit)=hRQ%R%XJv)iJd)=?QJR=))J%L)t;h;utRi;?LRdARR;ivtLJdd=)uht;;??hRi))*****;RQ;1%oO=tR=QQd%Rl%%hu%tL;WQQ%t)tJ)ihtQhd?=Lt;i=?dR=hc%vLi1)Q=tQtdLC?JuRJOQhd?5tQ?R%=uCt?hQ?LLRhv=Lu%Rt;Ru?RJ;uLJdLRv;%vRL%)vhRid%)=vJ%%ddQ=)iQhu?RJ%i)tJhut=%L)RJ;uiRd;;?uRh7QvRLL%-h%R="));local e=(-4731+(function()local l,n=0,1;(function(t,d,n,e)t(d(n,n,e,n),e(e,d and e,t,e),t(n,e,t and n,n),d(n,e,t,n)and e(e,e,n,d))end)(function(t,e,o,d)if l>348 then return o end l=l+1 n=(n+714)%14261 if(n%420)>=210 then n=(n+321)%19461 return e else return t(e(t,o and t,d,e),t(o,e,o,d),d(e,e,e,e and t)and e(o,d,d,t),d(t,d,o,t))end return e(d(t and d,e,t and o,o and e),t(o and d,t,t,e),t(d and e,o,t,o),o(e,d,e and d,d))end,function(o,t,d,e)if l>159 then return e end l=l+1 n=(n+813)%37701 if(n%662)<=331 then n=(n-993)%12456 return e(t(e,e,t,d),o(o,e,t,e),e(d and d,t,e,e),d(e,t,o,t))else return o end return d end,function(d,t,e,o)if l>342 then return e end l=l+1 n=(n+14)%28517 if(n%1412)>706 then return e else return e(e(o,t,o,e)and t(e,o,o,d),d(d,t,e,o),t(d,e,t,e),d(e,e,d,t))end return e(e(e and d,e,e and d,e),d(t,t,e,e),d(d,d,t and d,e),o(t,t,t and t,o))end,function(e,d,o,t)if l>269 then return e end l=l+1 n=(n+332)%31038 if(n%1216)>=608 then n=(n+807)%19940 return d else return t(o(d,e,e,t),o(o,t,e,o and e),d(d,t and e,o,o),t(t,d,t and e,e))end return t(e(t and e,e,e,t),d(d,o,o,d),e(t and t,d and d,e,d)and t(o and o,e,e,d),d(t,o,t and d,e))end)return n;end)())local g=(getfenv)or(function()return _ENV end);local _=o.FrxDIjpQ or o.afiZmkGr;local t=3;local l=2;local ee=1;local c=4;local function p(b,...)local u=r(e,"89s(Jypnb_oQ51{,n_{by51>Jn5ss5oj9J,yp9_Ey9Q_Jypf9pb1+Q9(_1,bp5{fo9(noQ9{nn,1p,1,Jn15J{Q_(s_,9,pb,1p5{&yy1s9_5d(JopoQs__&UJnbJQQy(1_9:nbpw(p_{Qp,{Qy__,1(pQQbs5o-pb,jpy{(SJQ{(yo59_Jb9(n9,n9b15ys5((5o99(_b,1nGoUpQ19ywQb{Jby9Qb,usyQ{9y(bJs{n,5((_ob95_#nJ{oyy5{JbysQ5(loJ9bb1SDnJ{by11&JJQb({Qy9Jbb,5ns{Jyb55ys17sb_59Vbn,bp5{Ano5Q(5QEsJ_{j5b9,Jp515yJ5,(bo5s+_oGbn1,0pJ{sJ55q(Jo_95_MdJbo{5pN1JJb59(=oJ9b_{VsnJ{_y519JJQbs5o6sbbb,5n&{pyb51JFQJ(9_59LbJ,_p5{LyJ5b(5Q!sJ_b");local n=0;o.WzSCuErF(function()n=n+1 end)local function e(e,t)if t then return n end;n=e+n;end local d,n,f=a(0,a,e,u,o.MmLLhxzI);local function r()local n,t=o.MmLLhxzI(u,e(1,3),e(5,6)+2);e(2);return(t*256)+n;end;local s=true;local s=0 local function j()local e=n();local n=n();local l=1;local t=(d(n,1,20)*(2^32))+e;local e=d(n,21,31);local n=((-1)^d(n,32));if(e==0)then if(t==s)then return n*0;else e=1;l=0;end;elseif(e==2047)then return(t==0)and(n*(1/0))or(n*(0/0));end;return o.ZXd_FEGj(n,e-1023)*(l+(t/(2^52)));end;local p=n;local function m(n)local t;if(not n)then n=p();if(n==0)then return'';end;end;t=o.QqZDdjXR(u,e(1,3),e(5,6)+n-1);e(n)local e=""for n=(1+s),#t do e=e..o.QqZDdjXR(t,n,n)end return e;end;local p=#o.jfGYxWiX(h('\49.\48'))~=1 local e=n;local function y(...)return{...},o.JqCuJiYI('#',...)end local function k()local s={};local e={};local u={};local h={s,u,nil,e};local e=n()local a={}for d=1,e do local t=f();local e;if(t==2)then e=(f()~=#{});elseif(t==0)then local n=j();if p and o.DDKLeWCg(o.jfGYxWiX(n),'.(\48+)$')then n=o.whVYLFxU(n);end e=n;elseif(t==3)then e=m();end;a[d]=e;end;for u=1,n()do local e=f();if(d(e,1,1)==0)then local o=d(e,2,3);local f=d(e,4,6);local e={r(),r(),nil,nil};if(o==0)then e[t]=r();e[c]=r();elseif(o==#{1})then e[t]=n();elseif(o==b[2])then e[t]=n()-(2^16)elseif(o==b[3])then e[t]=n()-(2^16)e[c]=r();end;if(d(f,1,1)==1)then e[l]=a[e[l]]end if(d(f,2,2)==1)then e[t]=a[e[t]]end if(d(f,3,3)==1)then e[c]=a[e[c]]end s[u]=e;end end;for e=1,n()do u[e-(#{1})]=k();end;h[3]=f();return h;end;local function p(t,e,n)local d=e;local d=n;return h(o.DDKLeWCg(o.DDKLeWCg(({o.WzSCuErF(t)})[2],e),n))end local function z(h,e,f)local function g(...)local r,g,u,p,k,n,m,j,b,s,_,d;local e=0;while-1<e do if 2>=e then if 1<=e then if e>-1 then repeat if 2>e then u=a(6,97,3,52,h);k=y p=0;break;end;n=-41;m=-1;until true;else u=a(6,97,3,52,h);k=y p=0;end else r=a(6,91,1,22,h);g=a(6,15,2,41,h);end else if 5<=e then if 3~=e then repeat if 6~=e then d=a(7);break;end;e=-2;until true;else e=-2;end else if e~=1 then for n=44,64 do if e~=4 then j={};b={...};break;end;s=o.JqCuJiYI('#',...)-1;_={};break;end;else s=o.JqCuJiYI('#',...)-1;_={};end end end e=e+1;end;for e=0,s do if(e>=u)then j[e-u]=b[e+1];else d[e]=b[e+1];end;end;local e=s-u+1 local e;local o;local function a(...)while true do end end while true do if n<-40 then n=n+42 end e=r[n];o=e[ee];if 8>=o then if 3<o then if 6>o then if o~=3 then for r=46,84 do if o~=4 then f[e[t]]=d[e[l]];break;end;if(d[e[l]]~=e[c])then n=n+1;else n=e[t];end;break;end;else f[e[t]]=d[e[l]];end else if 7<=o then if 4~=o then for n=25,72 do if o~=7 then f[e[t]]=d[e[l]];break;end;d(e[l],e[t]);break;end;else d(e[l],e[t]);end else local e=e[l]d[e](d[e+1])end end else if o<=1 then if-1<o then repeat if o~=0 then for o=0,3 do if o<2 then if o~=-2 then for a=22,70 do if 0<o then f[e[t]]=d[e[l]];n=n+1;e=r[n];break;end;d[e[l]]=(e[t]~=0);n=n+1;e=r[n];break;end;else f[e[t]]=d[e[l]];n=n+1;e=r[n];end else if 2~=o then if(d[e[l]]~=e[c])then n=n+1;else n=e[t];end;else d[e[l]]=f[e[t]];n=n+1;e=r[n];end end end break;end;d[e[l]]=f[e[t]];until true;else for o=0,3 do if o<2 then if o~=-2 then for a=22,70 do if 0<o then f[e[t]]=d[e[l]];n=n+1;e=r[n];break;end;d[e[l]]=(e[t]~=0);n=n+1;e=r[n];break;end;else f[e[t]]=d[e[l]];n=n+1;e=r[n];end else if 2~=o then if(d[e[l]]~=e[c])then n=n+1;else n=e[t];end;else d[e[l]]=f[e[t]];n=n+1;e=r[n];end end end end else if o~=-1 then repeat if o~=3 then local o;d(e[l],e[t]);n=n+1;e=r[n];o=e[l]d[o](d[o+1])n=n+1;e=r[n];do return end;break;end;if(d[e[l]]~=e[c])then n=n+1;else n=e[t];end;until true;else if(d[e[l]]~=e[c])then n=n+1;else n=e[t];end;end end end else if 12<o then if o>14 then if o>15 then if o<17 then local e=e[l]d[e](d[e+1])else n=e[t];end else d[e[l]]=(e[t]~=0);end else if 14~=o then local o,r,a,c,f;local n=0;while n>-1 do if 2<n then if n>=5 then if 6>n then d(f,c);else n=-2;end else if 1<=n then repeat if 4~=n then c=o[a];break;end;f=o[r];until true;else f=o[r];end end else if 1<=n then if n~=1 then a=t;else r=l;end else o=e;end end n=n+1 end else do return end;end end else if o>=11 then if o>7 then for r=21,57 do if o~=12 then n=e[t];break;end;d[e[l]]=(e[t]~=0);break;end;else d[e[l]]=(e[t]~=0);end else if 9~=o then do return end;else d[e[l]]=f[e[t]];end end end end n=1+n;end;end;return g end;local d=0xff;local a={};local o=(1);local l='';(function(n)local t=n local r=0x00 local e=0x00 t={(function(d)if r>0x1f then return d end r=r+1 e=(e+0xc08-d)%0x23 return(e%0x03==0x0 and(function(t)if not n[t]then e=e+0x01 n[t]=(0x68);end return true end)'tAUcF'and t[0x3](0x35d+d))or(e%0x03==0x1 and(function(t)if not n[t]then e=e+0x01 n[t]=(0xc);end return true end)'ynzMZ'and t[0x2](d+0x92))or(e%0x03==0x2 and(function(t)if not n[t]then e=e+0x01 n[t]=(0xe5);end return true end)'AGaFZ'and t[0x1](d+0x9a))or d end),(function(f)if r>0x20 then return f end r=r+1 e=(e+0x1369-f)%0x45 return(e%0x03==0x1 and(function(t)if not n[t]then e=e+0x01 n[t]=(0x2f);end return true end)'vYRUC'and t[0x3](0x28c+f))or(e%0x03==0x0 and(function(t)if not n[t]then e=e+0x01 n[t]=(0x71);d[2]=(d[2]*(p(function()a()end,_(l))-p(d[1],_(l))))+1;a[o]={};d=d[2];o=o+d;end return true end)'boBmw'and t[0x2](f+0x1bc))or(e%0x03==0x2 and(function(t)if not n[t]then e=e+0x01 n[t]=(0xb5);a[o]=g();o=o+d;end return true end)'_mRpU'and t[0x1](f+0x2fc))or f end),(function(f)if r>0x2e then return f end r=r+1 e=(e+0x112f-f)%0x2c return(e%0x03==0x2 and(function(t)if not n[t]then e=e+0x01 n[t]=(0x51);end return true end)'aIbAO'and t[0x1](0x3ac+f))or(e%0x03==0x0 and(function(t)if not n[t]then e=e+0x01 n[t]=(0xca);l={l..'\58 a',l};a[o]=k();o=o+(1);l[1]='\58'..l[1];d[2]=0xff;end return true end)'WWclx'and t[0x2](f+0x367))or(e%0x03==0x1 and(function(t)if not n[t]then e=e+0x01 n[t]=(0xf8);l='\37';d={function()d()end};l=l..'\100\43';end return true end)'WLKda'and t[0x3](f+0xd0))or f end)}t[0x3](0xbf)end){};local e=z(_(a));return e(...);end return p((function()local n={}local e=0x01;local t;if o.CAXfseP_ then t=o.CAXfseP_(p)else t=''end if o.DDKLeWCg(t,o.CAHzufOB)then e=e+0;else e=e+1;end n[e]=0x02;n[n[e]+0x01]=0x03;return n;end)(),...)end)((function(t,e,n,d,l,o)local o;if 3<t then if t<6 then if t>0 then for o=21,61 do if t<5 then local t=d;local d,l,o=l(2);do return function()local e,n,r,f=e(n,t(t,t),t(t,t)+3);t(4);return(f*d)+(r*l)+(n*o)+e;end;end;break;end;local t=d;do return function()local e=e(n,t(t,t),t(t,t));t(1);return e;end;end;break;end;else local t=d;do return function()local e=e(n,t(t,t),t(t,t));t(1);return e;end;end;end else if t>=7 then if t>=5 then for e=18,68 do if 8>t then do return setmetatable({},{['__\99\97\108\108']=function(e,l,t,d,n)if n then return e[n]elseif d then return e else e[l]=t end end})end break;end;do return n(t,nil,n);end break;end;else do return setmetatable({},{['__\99\97\108\108']=function(e,d,t,l,n)if n then return e[n]elseif l then return e else e[d]=t end end})end end else do return l[n]end;end end else if 2>t then if 0~=t then do return function(n,e,t)if t then local e=(n/2^(e-1))%2^((t-1)-(e-1)+1);return e-e%1;else local e=2^(e-1);return(n%(e+e)>=e)and 1 or 0;end;end;end;else do return e(1),e(4,l,d,n,e),e(5,l,d,n)end;end else if t>=0 then repeat if t~=3 then do return 16777216,65536,256 end;break;end;do return e(1),e(4,l,d,n,e),e(5,l,d,n)end;until true;else do return e(1),e(4,l,d,n,e),e(5,l,d,n)end;end end end end),...).")-- LocalScript UNIQUE : Admin Menu vert styl√© avec Key System
-- Fonctionnalit√©s : Key / TP / ESP / NoClip / Fly / AutoATM / Drag / Onglets

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer

----------------------------------------------------
-- 0) VARIABLES GLOBALES
----------------------------------------------------
local espEnabled = false
local noclipEnabled = false
local flyEnabled = false
local flySpeed = 60

_G = _G or {}
_G.AutoFarmATM = _G.AutoFarmATM or false

local highlights = {}

-- üîê KEY SYSTEM
local KEY_CODE = "J5bxTzKHYx"
local menuUnlocked = false

----------------------------------------------------
-- UTILITAIRES
----------------------------------------------------
local function getTeamColorForPlayer(plr)
    local team = plr.Team
    if team then
        local name = string.lower(team.Name)

        if string.find(name, "police") or string.find(name, "policier") or string.find(name, "gendar") then
            return Color3.fromRGB(0, 200, 255)
        end

        if string.find(name, "civil") then
            return Color3.fromRGB(0, 255, 100)
        end
    end
    return Color3.fromRGB(255, 255, 0)
end

local function clearESP()
    for plr, hl in pairs(highlights) do
        if hl and hl.Parent then hl:Destroy() end
        highlights[plr] = nil
    end
end

local function getHumanoid()
    local char = player.Character
    if not char then return nil end
    return char:FindFirstChildOfClass("Humanoid")
end

-- FLY propre (pas de rebond, suit la cam√©ra)
local function setFlyState(enabled)
    flyEnabled = enabled
    local hum = getHumanoid()
    local char = player.Character
    local root = char and char:FindFirstChild("HumanoidRootPart")

    if hum then
        hum.PlatformStand = enabled
    end
    if root and not enabled then
        root.AssemblyLinearVelocity = Vector3.zero
    end
end

player.CharacterAdded:Connect(function()
    task.wait(.3)
    if flyEnabled then setFlyState(true) end
end)

----------------------------------------------------
-- 1) SCREEN GUI
----------------------------------------------------
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AdminUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

----------------------------------------------------
-- 2) COORDONN√âES EN HAUT √Ä DROITE (CACH√âES AU D√âPART)
----------------------------------------------------
local coordsLabel = Instance.new("TextLabel")
coordsLabel.Size = UDim2.new(0, 350, 0, 40)
coordsLabel.Position = UDim2.new(1, -360, 0, 10)
coordsLabel.BackgroundTransparency = 1
coordsLabel.TextSize = 20
coordsLabel.TextColor3 = Color3.fromRGB(180, 255, 180)
coordsLabel.Font = Enum.Font.GothamBold
coordsLabel.TextXAlignment = Enum.TextXAlignment.Right
coordsLabel.Text = "Position : ..."
coordsLabel.Visible = false
coordsLabel.Parent = screenGui

----------------------------------------------------
-- 3) MENU PRINCIPAL + FOND + DRAG (THEME VERT) (CACH√â AU D√âPART)
----------------------------------------------------
local shadowFrame = Instance.new("Frame")
shadowFrame.Size = UDim2.new(0, 290, 0, 360)
shadowFrame.Position = UDim2.new(0, 30, 0, 110)
shadowFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
shadowFrame.BackgroundTransparency = 0.5
shadowFrame.Visible = false
shadowFrame.Parent = screenGui
Instance.new("UICorner", shadowFrame).CornerRadius = UDim.new(0, 22)

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 280, 0, 350)
frame.Position = UDim2.new(0, 25, 0, 105)
frame.BackgroundColor3 = Color3.fromRGB(10, 20, 10)
frame.BackgroundTransparency = 0.1
frame.Visible = false
frame.Parent = screenGui

local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 18)
frameCorner.Parent = frame

local frameStroke = Instance.new("UIStroke")
frameStroke.Thickness = 2
frameStroke.Color = Color3.fromRGB(90, 255, 140)
frameStroke.Transparency = 0.2
frameStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
frameStroke.Parent = frame

local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(15, 40, 20)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(5, 25, 10)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(5, 15, 5))
})
gradient.Rotation = 90
gradient.Parent = frame

-- Bandeau titre
local header = Instance.new("Frame")
header.Size = UDim2.new(1, -20, 0, 40)
header.Position = UDim2.new(0, 10, 0, 8)
header.BackgroundColor3 = Color3.fromRGB(10, 40, 20)
header.BackgroundTransparency = 0.1
header.Parent = frame
Instance.new("UICorner", header).CornerRadius = UDim.new(0, 14)

local headerStroke = Instance.new("UIStroke")
headerStroke.Thickness = 1
headerStroke.Color = Color3.fromRGB(60, 200, 110)
headerStroke.Transparency = 0.2
headerStroke.Parent = header

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, -40, 0, 22)
titleLabel.Position = UDim2.new(0, 10, 0, 2)
titleLabel.BackgroundTransparency = 1
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextSize = 20
titleLabel.TextColor3 = Color3.fromRGB(200, 255, 200)
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Text = "GreenMenu"
titleLabel.Parent = header

local subTitle = Instance.new("TextLabel")
subTitle.Size = UDim2.new(1, -40, 0, 14)
subTitle.Position = UDim2.new(0, 10, 0, 20)
subTitle.BackgroundTransparency = 1
subTitle.Font = Enum.Font.Gotham
subTitle.TextSize = 12
subTitle.TextColor3 = Color3.fromRGB(130, 230, 160)
subTitle.TextXAlignment = Enum.TextXAlignment.Left
subTitle.Text = "Made By Jack"
subTitle.Parent = header

local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 26, 0, 26)
closeBtn.Position = UDim2.new(1, -30, 0, 7)
closeBtn.BackgroundColor3 = Color3.fromRGB(40, 10, 10)
closeBtn.AutoButtonColor = true
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18
closeBtn.TextColor3 = Color3.fromRGB(255, 200, 200)
closeBtn.Text = "√ó"
closeBtn.Parent = header
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(1, 0)

closeBtn.MouseButton1Click:Connect(function()
    frame.Visible = false
    shadowFrame.Visible = false
end)

-- DRAG
local dragging, dragStart, startPos, dragInput

frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 and input.Position.Y < (frame.AbsolutePosition.Y + 60) then
        dragging = true
        dragStart = input.Position
        startPos = frame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then dragging = false end
        end)
    end
end)

frame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
        shadowFrame.Position = frame.Position + UDim2.new(0, 5, 0, 5)
    end
end)

----------------------------------------------------
-- üîê 3.5) KEY UI (GreenMenu)
----------------------------------------------------
local keyFrame = Instance.new("Frame")
keyFrame.Size = UDim2.new(0, 320, 0, 190)
keyFrame.Position = UDim2.new(0.5, -160, 0.5, -95)
keyFrame.BackgroundColor3 = Color3.fromRGB(10, 25, 10)
keyFrame.BackgroundTransparency = 0.1
keyFrame.Parent = screenGui
Instance.new("UICorner", keyFrame).CornerRadius = UDim.new(0, 18)

local keyStroke = Instance.new("UIStroke")
keyStroke.Thickness = 2
keyStroke.Color = Color3.fromRGB(90, 255, 140)
keyStroke.Transparency = 0.2
keyStroke.Parent = keyFrame

local keyTitle = Instance.new("TextLabel")
keyTitle.Size = UDim2.new(1, 0, 0, 26)
keyTitle.Position = UDim2.new(0, 0, 0, 10)
keyTitle.BackgroundTransparency = 1
keyTitle.Font = Enum.Font.GothamBold
keyTitle.TextSize = 22
keyTitle.TextColor3 = Color3.fromRGB(200, 255, 200)
keyTitle.Text = "GreenMenu"
keyTitle.Parent = keyFrame

local keySub = Instance.new("TextLabel")
keySub.Size = UDim2.new(1, -20, 0, 18)
keySub.Position = UDim2.new(0, 10, 0, 38)
keySub.BackgroundTransparency = 1
keySub.Font = Enum.Font.Gotham
keySub.TextSize = 13
keySub.TextColor3 = Color3.fromRGB(160, 230, 160)
keySub.Text = "Enter your key to unlock the menu"
keySub.Parent = keyFrame

local keyBox = Instance.new("TextBox")
keyBox.Size = UDim2.new(1, -40, 0, 30)
keyBox.Position = UDim2.new(0, 20, 0, 70)
keyBox.BackgroundColor3 = Color3.fromRGB(20, 50, 25)
keyBox.TextColor3 = Color3.fromRGB(220, 255, 230)

keyBox.PlaceholderText = "Enter Key..."  -- üëç Placeholder propre
keyBox.Text = ""                         -- üî• ENL√àVE "TextBox" automatiquement

keyBox.Font = Enum.Font.Gotham
keyBox.TextSize = 16
keyBox.ClearTextOnFocus = false
keyBox.Parent = keyFrame

Instance.new("UICorner", keyBox).CornerRadius = UDim.new(0, 10)

local keyBoxStroke = Instance.new("UIStroke")
keyBoxStroke.Thickness = 1.5
keyBoxStroke.Color = Color3.fromRGB(80, 200, 120)
keyBoxStroke.Transparency = 0.3
keyBoxStroke.Parent = keyBox

local unlockBtn = Instance.new("TextButton")
unlockBtn.Size = UDim2.new(0.5, -30, 0, 30)
unlockBtn.Position = UDim2.new(0, 20, 0, 115)
unlockBtn.BackgroundColor3 = Color3.fromRGB(30, 90, 45)
unlockBtn.AutoButtonColor = true
unlockBtn.Text = "Unlock"
unlockBtn.Font = Enum.Font.GothamBold
unlockBtn.TextSize = 16
unlockBtn.TextColor3 = Color3.fromRGB(220, 255, 230)
unlockBtn.Parent = keyFrame
Instance.new("UICorner", unlockBtn).CornerRadius = UDim.new(0, 10)

local getKeyBtn = Instance.new("TextButton")
getKeyBtn.Size = UDim2.new(0.5, -30, 0, 30)
getKeyBtn.Position = UDim2.new(0.5, 10, 0, 115)
getKeyBtn.BackgroundColor3 = Color3.fromRGB(25, 60, 35)
getKeyBtn.AutoButtonColor = true
getKeyBtn.Text = "GetKey"
getKeyBtn.Font = Enum.Font.GothamBold
getKeyBtn.TextSize = 16
getKeyBtn.TextColor3 = Color3.fromRGB(190, 255, 200)
getKeyBtn.Parent = keyFrame
Instance.new("UICorner", getKeyBtn).CornerRadius = UDim.new(0, 10)

local keyStatus = Instance.new("TextLabel")
keyStatus.Size = UDim2.new(1, -20, 0, 18)
keyStatus.Position = UDim2.new(0, 10, 0, 150)
keyStatus.BackgroundTransparency = 1
keyStatus.Font = Enum.Font.Gotham
keyStatus.TextSize = 13
keyStatus.TextColor3 = Color3.fromRGB(180, 230, 180)
keyStatus.Text = ""
keyStatus.Parent = keyFrame

-- Bouton GetKey -> copie le lien dans le presse-papiers (si dispo)
getKeyBtn.MouseButton1Click:Connect(function()
    local url = "https://discord.gg/aY8Rd4mj"
    local ok = false
    pcall(function()
        if setclipboard then
            setclipboard(url)
            ok = true
        end
    end)
    if ok then
        keyStatus.TextColor3 = Color3.fromRGB(140, 255, 140)
        keyStatus.Text = "Discord link copied to clipboard!"
    else
        keyStatus.TextColor3 = Color3.fromRGB(255, 220, 140)
        keyStatus.Text = url
    end
end)

-- V√©rification de la cl√©
unlockBtn.MouseButton1Click:Connect(function()
    if keyBox.Text == KEY_CODE then
        menuUnlocked = true
        keyStatus.TextColor3 = Color3.fromRGB(140, 255, 140)
        keyStatus.Text = "Key valid! Unlocking menu..."

        -- Affiche le vrai menu
        frame.Visible = true
        shadowFrame.Visible = true
        coordsLabel.Visible = true

        -- Supprime l'UI de cl√©
        task.delay(0.2, function()
            if keyFrame then
                keyFrame:Destroy()
            end
        end)
    else
        keyStatus.TextColor3 = Color3.fromRGB(255, 120, 120)
        keyStatus.Text = "Invalid key."
    end
end)

----------------------------------------------------
-- 4) ONGLET BAR (VERT)
----------------------------------------------------
local tabs = {}
local currentTab = "Teleportation"

local tabBar = Instance.new("Frame")
tabBar.Size = UDim2.new(1, -20, 0, 30)
tabBar.Position = UDim2.new(0, 10, 0, 60)
tabBar.BackgroundTransparency = 1
tabBar.Parent = frame

local tabBg = Instance.new("Frame")
tabBg.Size = UDim2.new(1, 0, 1, 0)
tabBg.BackgroundColor3 = Color3.fromRGB(10, 30, 15)
tabBg.BackgroundTransparency = 0.2
tabBg.Parent = tabBar
Instance.new("UICorner", tabBg).CornerRadius = UDim.new(0, 12)

local tabLayout = Instance.new("UIListLayout")
tabLayout.FillDirection = Enum.FillDirection.Horizontal
tabLayout.VerticalAlignment = Enum.VerticalAlignment.Center
tabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
tabLayout.Padding = UDim.new(0, 6)
tabLayout.Parent = tabBg

local function createTabButton(name, display)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 80, 0, 24)
    btn.BackgroundColor3 = Color3.fromRGB(20, 50, 25)
    btn.BackgroundTransparency = 0.3
    btn.Text = display
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 13
    btn.TextColor3 = Color3.fromRGB(180, 255, 200)
    btn.AutoButtonColor = false
    btn.Parent = tabBg

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 10)
    corner.Parent = btn

    local stroke = Instance.new("UIStroke")
    stroke.Thickness = 1
    stroke.Color = Color3.fromRGB(60, 160, 90)
    stroke.Transparency = 0.4
    stroke.Parent = btn

    tabs[name] = btn
    return btn
end

local teleportTabBtn = createTabButton("Teleportation", "Teleport")
local visualTabBtn   = createTabButton("Visual", "Visual")
local miscTabBtn     = createTabButton("Misc", "Misc")

----------------------------------------------------
-- 5) FRAMES DE CONTENU
----------------------------------------------------
local contentFrame = Instance.new("Frame")
contentFrame.Size = UDim2.new(1, -20, 1, -100)
contentFrame.Position = UDim2.new(0, 10, 0, 95)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = frame

local teleportFrame = Instance.new("Frame")
teleportFrame.Size = UDim2.new(1, 0, 1, 0)
teleportFrame.BackgroundTransparency = 1
teleportFrame.Parent = contentFrame

local visualFrame = Instance.new("Frame")
visualFrame.Size = UDim2.new(1, 0, 1, 0)
visualFrame.BackgroundTransparency = 1
visualFrame.Visible = false
visualFrame.Parent = contentFrame

local miscFrame = Instance.new("Frame")
miscFrame.Size = UDim2.new(1, 0, 1, 0)
miscFrame.BackgroundTransparency = 1
miscFrame.Visible = false
miscFrame.Parent = contentFrame

local function updateTabs()
    for name, btn in pairs(tabs) do
        if name == currentTab then
            btn.BackgroundColor3 = Color3.fromRGB(40, 120, 60)
            btn.BackgroundTransparency = 0
            btn.TextColor3 = Color3.fromRGB(10, 20, 10)
        else
            btn.BackgroundColor3 = Color3.fromRGB(20, 50, 25)
            btn.BackgroundTransparency = 0.3
            btn.TextColor3 = Color3.fromRGB(180, 255, 200)
        end
    end

    teleportFrame.Visible = (currentTab == "Teleportation")
    visualFrame.Visible   = (currentTab == "Visual")
    miscFrame.Visible     = (currentTab == "Misc")
end

teleportTabBtn.MouseButton1Click:Connect(function()
    currentTab = "Teleportation"
    updateTabs()
end)

visualTabBtn.MouseButton1Click:Connect(function()
    currentTab = "Visual"
    updateTabs()
end)

miscTabBtn.MouseButton1Click:Connect(function()
    currentTab = "Misc"
    updateTabs()
end)

updateTabs()

----------------------------------------------------
-- 6) TELEPORTATION (UI VERT) + Police Station
----------------------------------------------------
local function createTPButton(name, posY)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 190, 0, 36)
    btn.Position = UDim2.new(0, 25, 0, posY)
    btn.BackgroundColor3 = Color3.fromRGB(25, 80, 40)
    btn.AutoButtonColor = true
    btn.Text = name
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 18
    btn.TextColor3 = Color3.fromRGB(220, 255, 230)
    btn.Parent = teleportFrame

    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 14)

    local stroke = Instance.new("UIStroke")
    stroke.Thickness = 1.5
    stroke.Color = Color3.fromRGB(80, 220, 120)
    stroke.Transparency = 0.2
    stroke.Parent = btn

    return btn
end

local vaultBtn = createTPButton("Vault", 5)
vaultBtn.MouseButton1Click:Connect(function()
    local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if root then root.CFrame = CFrame.new(-388.7, 617.2, -1153) end
end)

local sellBtn = createTPButton("PawnShop", 55)
sellBtn.MouseButton1Click:Connect(function()
    local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if root then root.CFrame = CFrame.new(-2878, 36.7, 1633) end
end)

local militaryBtn = createTPButton("Military Base", 105)
militaryBtn.MouseButton1Click:Connect(function()
    local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if root then root.CFrame = CFrame.new(-1371.06, 178.681, 3236.76) end
end)

local policeBtn = createTPButton("Police Station", 155)
policeBtn.MouseButton1Click:Connect(function()
    local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if root then root.CFrame = CFrame.new(1637.2, 123.6, -586.2) end
end)

----------------------------------------------------
-- 7) VISUAL : ESP
----------------------------------------------------
local vueBtn = Instance.new("TextButton")
vueBtn.Size = UDim2.new(0, 190, 0, 36)
vueBtn.Position = UDim2.new(0, 25, 0, 5)
vueBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
vueBtn.AutoButtonColor = true
vueBtn.Text = "ESP OFF"
vueBtn.Font = Enum.Font.GothamBold
vueBtn.TextSize = 18
vueBtn.TextColor3 = Color3.fromRGB(220, 255, 230)
vueBtn.Parent = visualFrame

Instance.new("UICorner", vueBtn).CornerRadius = UDim.new(0, 14)

local vueStroke = Instance.new("UIStroke")
vueStroke.Thickness = 1.5
vueStroke.Color = Color3.fromRGB(120, 120, 120)
vueStroke.Transparency = 0.3
vueStroke.Parent = vueBtn

vueBtn.MouseButton1Click:Connect(function()
    espEnabled = not espEnabled
    if espEnabled then
        vueBtn.Text = "ESP ON"
        vueBtn.BackgroundColor3 = Color3.fromRGB(30, 90, 45)
        vueStroke.Color = Color3.fromRGB(80, 220, 120)
    else
        vueBtn.Text = "ESP OFF"
        vueBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        vueStroke.Color = Color3.fromRGB(120, 120, 120)
        clearESP()
    end
end)

----------------------------------------------------
-- 8) MISC : NoClip / Fly / AutoATM
----------------------------------------------------
-- NoClip
local noclipBtn = Instance.new("TextButton")
noclipBtn.Size = UDim2.new(0, 190, 0, 36)
noclipBtn.Position = UDim2.new(0, 25, 0, 5)
noclipBtn.BackgroundColor3 = Color3.fromRGB(40, 50, 40)
noclipBtn.AutoButtonColor = true
noclipBtn.Text = "NoClip OFF"
noclipBtn.Font = Enum.Font.GothamBold
noclipBtn.TextSize = 18
noclipBtn.TextColor3 = Color3.fromRGB(220, 255, 230)
noclipBtn.Parent = miscFrame
Instance.new("UICorner", noclipBtn).CornerRadius = UDim.new(0, 14)

local noclipStroke = Instance.new("UIStroke")
noclipStroke.Thickness = 1.5
noclipStroke.Color = Color3.fromRGB(120, 120, 120)
noclipStroke.Transparency = 0.3
noclipStroke.Parent = noclipBtn

noclipBtn.MouseButton1Click:Connect(function()
    noclipEnabled = not noclipEnabled
    if noclipEnabled then
        noclipBtn.Text = "NoClip ON"
        noclipBtn.BackgroundColor3 = Color3.fromRGB(90, 80, 40)
        noclipStroke.Color = Color3.fromRGB(220, 200, 80)
    else
        noclipBtn.Text = "NoClip OFF"
        noclipBtn.BackgroundColor3 = Color3.fromRGB(40, 50, 40)
        noclipStroke.Color = Color3.fromRGB(120, 120, 120)
        local char = player.Character
        if char then
            for _, p in ipairs(char:GetDescendants()) do
                if p:IsA("BasePart") then p.CanCollide = true end
            end
        end
    end
end)

-- Fly
local flyBtn = Instance.new("TextButton")
flyBtn.Size = UDim2.new(0, 190, 0, 36)
flyBtn.Position = UDim2.new(0, 25, 0, 55)
flyBtn.BackgroundColor3 = Color3.fromRGB(40, 50, 60)
flyBtn.AutoButtonColor = true
flyBtn.Text = "Fly OFF"
flyBtn.Font = Enum.Font.GothamBold
flyBtn.TextSize = 18
flyBtn.TextColor3 = Color3.fromRGB(220, 255, 230)
flyBtn.Parent = miscFrame
Instance.new("UICorner", flyBtn).CornerRadius = UDim.new(0, 14)

local flyStroke = Instance.new("UIStroke")
flyStroke.Thickness = 1.5
flyStroke.Color = Color3.fromRGB(120, 120, 150)
flyStroke.Transparency = 0.3
flyStroke.Parent = flyBtn

flyBtn.MouseButton1Click:Connect(function()
    flyEnabled = not flyEnabled
    if flyEnabled then
        flyBtn.Text = "Fly ON"
        flyBtn.BackgroundColor3 = Color3.fromRGB(40, 110, 80)
        flyStroke.Color = Color3.fromRGB(80, 220, 160)
        setFlyState(true)
    else
        flyBtn.Text = "Fly OFF"
        flyBtn.BackgroundColor3 = Color3.fromRGB(40, 50, 60)
        flyStroke.Color = Color3.fromRGB(120, 120, 150)
        setFlyState(false)
    end
end)

-- AutoATM
local autoATMbtn = Instance.new("TextButton")
autoATMbtn.Size = UDim2.new(0, 190, 0, 36)
autoATMbtn.Position = UDim2.new(0, 25, 0, 105)
autoATMbtn.BackgroundColor3 = Color3.fromRGB(40, 60, 40)
autoATMbtn.AutoButtonColor = true
autoATMbtn.Text = "AutoATM"
autoATMbtn.Font = Enum.Font.GothamBold
autoATMbtn.TextSize = 18
autoATMbtn.TextColor3 = Color3.fromRGB(220, 255, 230)
autoATMbtn.Parent = miscFrame
Instance.new("UICorner", autoATMbtn).CornerRadius = UDim.new(0, 14)

local autoATMStroke = Instance.new("UIStroke")
autoATMStroke.Thickness = 1.5
autoATMStroke.Color = Color3.fromRGB(120, 180, 120)
autoATMStroke.Transparency = 0.3
autoATMStroke.Parent = autoATMbtn

local subText = Instance.new("TextLabel")
subText.Size = UDim2.new(0, 190, 0, 18)
subText.Position = UDim2.new(0, 25, 0, 145)
subText.BackgroundTransparency = 1
subText.Font = Enum.Font.Gotham
subText.TextSize = 13
subText.TextColor3 = Color3.fromRGB(180, 230, 180)
subText.Text = "Press respawn to stop"
subText.Parent = miscFrame

local function refreshAutoATM()
    if _G.AutoFarmATM then
        autoATMbtn.BackgroundColor3 = Color3.fromRGB(40, 120, 70)
        autoATMStroke.Color = Color3.fromRGB(80, 220, 140)
    else
        autoATMbtn.BackgroundColor3 = Color3.fromRGB(40, 60, 40)
        autoATMStroke.Color = Color3.fromRGB(120, 180, 120)
    end
end
refreshAutoATM()

autoATMbtn.MouseButton1Click:Connect(function()
    _G.AutoFarmATM = not _G.AutoFarmATM
    refreshAutoATM()
    if _G.AutoFarmATM then
        pcall(function()
            loadstring(game:HttpGet("https://pastefy.app/LxpLejsi/raw"))()
        end)
    end
end)

----------------------------------------------------
-- 9) LOOP : COORDS / ESP / NOCLIP / FLY
----------------------------------------------------
RunService.RenderStepped:Connect(function(dt)
    local char = player.Character
    local root = char and char:FindFirstChild("HumanoidRootPart")

    -- Coordonn√©es
    if root and coordsLabel.Visible then
        local pos = root.Position
        coordsLabel.Text = string.format("X: %.1f | Y: %.1f | Z: %.1f", pos.X, pos.Y, pos.Z)
    end

    -- ESP
    if espEnabled then
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= player then
                local c = plr.Character
                if c and c:FindFirstChild("HumanoidRootPart") then
                    local hl = highlights[plr]
                    if not hl then
                        hl = Instance.new("Highlight")
                        hl.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                        hl.FillTransparency = 0.75
                        hl.Parent = c
                        highlights[plr] = hl
                    end
                    local col = getTeamColorForPlayer(plr)
                    hl.Adornee = c
                    hl.FillColor = col
                    hl.OutlineColor = col
                end
            end
        end
    end

    -- Noclip
    if noclipEnabled and char then
        for _, p in ipairs(char:GetDescendants()) do
            if p:IsA("BasePart") then
                p.CanCollide = false
            end
        end
    end

    -- Fly
    if flyEnabled and root then
        local cam = workspace.CurrentCamera
        if cam then
            root.AssemblyLinearVelocity = Vector3.zero

            local moveDir = Vector3.zero

            local forward = UserInputService:IsKeyDown(Enum.KeyCode.W) or UserInputService:IsKeyDown(Enum.KeyCode.Z)
            local back    = UserInputService:IsKeyDown(Enum.KeyCode.S)
            local left    = UserInputService:IsKeyDown(Enum.KeyCode.A) or UserInputService:IsKeyDown(Enum.KeyCode.Q)
            local right   = UserInputService:IsKeyDown(Enum.KeyCode.D)
            local up      = UserInputService:IsKeyDown(Enum.KeyCode.Space)
            local down    = UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) or UserInputService:IsKeyDown(Enum.KeyCode.LeftShift)

            if forward then moveDir += cam.CFrame.LookVector end
            if back    then moveDir -= cam.CFrame.LookVector end
            if right   then moveDir += cam.CFrame.RightVector end
            if left    then moveDir -= cam.CFrame.RightVector end
            if up      then moveDir += Vector3.new(0,1,0) end
            if down    then moveDir -= Vector3.new(0,1,0) end

            local pos = root.Position

            if moveDir.Magnitude > 0 then
                moveDir = moveDir.Unit
                local newPos = pos + moveDir * flySpeed * dt

                local look = Vector3.new(moveDir.X, 0, moveDir.Z)
                if look.Magnitude < 0.01 then
                    look = Vector3.new(cam.CFrame.LookVector.X, 0, cam.CFrame.LookVector.Z)
                end

                root.CFrame = CFrame.new(newPos, newPos + look.Unit)
            else
                local look = Vector3.new(cam.CFrame.LookVector.X, 0, cam.CFrame.LookVector.Z)
                if look.Magnitude < 0.01 then
                    look = Vector3.new(0, 0, -1)
                end
                root.CFrame = CFrame.new(pos, pos + look.Unit)
            end
        end
    end
end)