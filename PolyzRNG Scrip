local zf = workspace.Enemies
local Rep = game:GetService("ReplicatedStorage")
local Remote = Rep:WaitForChild("Remotes"):WaitForChild("ShootEnemy")

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

local spread = 3

local normalMaxDistance = 40
local bossMaxDistance = 200
local maxDistance = normalMaxDistance


local ScreenGui = Instance.new("ScreenGui")
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")


local MainFrame = Instance.new("Frame")
MainFrame.Parent = ScreenGui
MainFrame.Size = UDim2.new(1, 0, 1, 0)
MainFrame.BackgroundTransparency = 1
MainFrame.Visible = true

local function CreateLabel(parent, text, posY, color)
    local L = Instance.new("TextLabel")
    L.Parent = parent
    L.Size = UDim2.new(0, 350, 0, 25)
    L.Position = UDim2.new(0, 10, 0.5, posY)
    L.BackgroundTransparency = 1
    L.TextColor3 = color
    L.TextScaled = true
    L.TextXAlignment = Enum.TextXAlignment.Left
    L.TextWrapped = true
    L.Text = text
    return L
end

CreateLabel(MainFrame, "Make sure you have a B9 on you.", -120, Color3.fromRGB(255,255,255))
CreateLabel(MainFrame, "Only use Boss Mode when the boss is active, or you risk being kicked.", -90, Color3.fromRGB(255,200,200))

local ToggleButton = Instance.new("TextButton")
ToggleButton.Parent = MainFrame
ToggleButton.Size = UDim2.new(0, 120, 0, 40)
ToggleButton.Position = UDim2.new(0, 10, 0.5, -40)
ToggleButton.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
ToggleButton.BackgroundTransparency = 0.3
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextScaled = true
ToggleButton.Text = "AutoKill: OFF"

local BossButton = Instance.new("TextButton")
BossButton.Parent = MainFrame
BossButton.Size = UDim2.new(0, 200, 0, 40)
BossButton.Position = UDim2.new(0, 10, 0.5, 10)
BossButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
BossButton.BackgroundTransparency = 0.3
BossButton.TextColor3 = Color3.fromRGB(255, 255, 255)
BossButton.TextScaled = true
BossButton.Text = "Mode BOSS: OFF"

CreateLabel(MainFrame, "Press Right Control to activate AutoKill", 60, Color3.fromRGB(200,255,200))
CreateLabel(MainFrame, "Press Left Control to activate Boss Mode", 90, Color3.fromRGB(200,200,255))

local Signature = Instance.new("TextLabel")
Signature.Parent = MainFrame
Signature.Size = UDim2.new(0, 200, 0, 20)
Signature.Position = UDim2.new(0, 10, 0.5, 120)
Signature.BackgroundTransparency = 1
Signature.TextColor3 = Color3.fromRGB(180, 180, 180)
Signature.TextScaled = true
Signature.TextXAlignment = Enum.TextXAlignment.Left
Signature.Text = "Made by JackShows"

local autoKillEnabled = false
local bossModeEnabled = false

UserInputService.InputBegan:Connect(function(input, gpe)
    if gpe then return end

    -- Right Ctrl -> AutoKill
    if input.KeyCode == Enum.KeyCode.RightControl then
        autoKillEnabled = not autoKillEnabled
        if autoKillEnabled then
            ToggleButton.Text = "AutoKill: ON"
            ToggleButton.BackgroundColor3 = Color3.fromRGB(0,170,0)
        else
            ToggleButton.Text = "AutoKill: OFF"
            ToggleButton.BackgroundColor3 = Color3.fromRGB(170,0,0)
        end
    end

    -- Left Ctrl -> Boss Mode
    if input.KeyCode == Enum.KeyCode.LeftControl then
        bossModeEnabled = not bossModeEnabled
        if bossModeEnabled then
            BossButton.Text = "Mode BOSS: ON"
            BossButton.BackgroundColor3 = Color3.fromRGB(170,85,0)
            maxDistance = bossMaxDistance
        else
            BossButton.Text = "Mode BOSS: OFF"
            BossButton.BackgroundColor3 = Color3.fromRGB(80,80,80)
            maxDistance = normalMaxDistance
        end
    end
end)

task.spawn(function()
    while true do
        task.wait()

        if not autoKillEnabled then continue end

        local character = LocalPlayer.Character
        if not character then continue end

        local hrp = character:FindFirstChild("HumanoidRootPart")
        if not hrp then continue end

        for _, v in ipairs(zf:GetChildren()) do
            local head = v:FindFirstChild("Head")
            local root = v:FindFirstChild("HumanoidRootPart") or head

            if head and root then
                local dist = (root.Position - hrp.Position).Magnitude
                if dist <= maxDistance then
                    local randomPos = head.Position + Vector3.new(
                        math.random(-spread, spread),
                        math.random(-spread, spread),
                        math.random(-spread, spread)
                    )

                    Remote:FireServer(v, head, randomPos, 0, "B9")
                end
            end
        end
    end
end)

task.spawn(function()
    while true do
        task.wait(math.random(1,2)/10)

        if autoKillEnabled then
            keypress(0x56)
            task.wait()
            keyrelease(0x56)
        end
    end
end)
